<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopSphere - E-Commerce</title>
    <style>
        /* --- GLOBAL STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background-color: #eaeded; }

        /* --- HEADER --- */
        header { background-color: #131921; color: white; display: flex; align-items: center; padding: 10px 20px; gap: 20px; position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 24px; font-weight: bold; color: white; text-decoration: none; }
        .search-container { flex-grow: 1; display: flex; border-radius: 4px; overflow: hidden; }
        .search-container input { width: 100%; padding: 10px; border: none; outline: none; }
        .search-container button { background-color: #febd69; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        .nav-links { display: flex; gap: 20px; font-size: 14px; }
        .nav-item { cursor: pointer; display: flex; flex-direction: column; color: white; text-decoration: none; position: relative;}
        .nav-item span:first-child { font-size: 12px; color: #ccc; }
        .nav-item span:last-child { font-weight: bold; }

        /* --- HERO SECTION --- */
        .hero { background-image: linear-gradient(to bottom, transparent, #eaeded), url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; height: 350px; }
        
        /* --- PRODUCT GRID (4 COLUMNS) --- */
        .main-content { padding: 20px; margin-top: -150px; position: relative; z-index: 10; }
        
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); /* 4 items per row */
            gap: 20px; 
        }

        /* Responsive */
        @media (max-width: 900px) { .product-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { .product-grid { grid-template-columns: 1fr; } }
        
        .product-card { background-color: white; padding: 20px; border-radius: 4px; display: flex; flex-direction: column; justify-content: space-between; transition: transform 0.2s; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .product-card img { width: 100%; height: 180px; object-fit: cover; margin-bottom: 15px; border-radius: 4px; }
        .product-card h3 { font-size: 16px; margin-bottom: 5px; height: 40px; overflow: hidden; }
        .price { font-size: 18px; font-weight: bold; color: #B12704; margin-bottom: 10px; }
        .add-btn { background-color: #ffd814; border: 1px solid #fcd200; padding: 8px; border-radius: 20px; cursor: pointer; font-size: 13px; }
        .add-btn:hover { background-color: #f7ca00; }

        /* --- MODALS (Popup) --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; }
        .side-panel { position: absolute; right: 0; top: 0; background-color: white; width: 400px; height: 100%; padding: 20px; display: flex; flex-direction: column; box-shadow: -2px 0 5px rgba(0,0,0,0.2); }
        .panel-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; padding-bottom: 15px; margin-bottom: 15px; }
        .items-list { flex-grow: 1; overflow-y: auto; }
        .item-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        
        .auth-box { background-color: white; width: 350px; margin: 80px auto; padding: 30px; border-radius: 8px; text-align: center; position: relative; }
        .auth-box input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; }
        .auth-btn { width: 100%; padding: 10px; background-color: #ffd814; border: 1px solid #fcd200; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .close-btn { font-size: 24px; cursor: pointer; }
        .error-msg { color: red; font-size: 12px; margin-bottom: 10px; display: none; }
        .order-card { background: #f8f9fa; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .order-date { font-size: 11px; color: #555; }
    </style>
</head>
<body>

    <header>
        <a href="#" class="logo">ShopSphere</a>
        <div class="search-container">
            <input type="text" placeholder="Search products...">
            <button>üîç</button>
        </div>
        <div class="nav-links">
            <div class="nav-item" id="auth-btn" onclick="handleAuthClick()">
                <span id="user-greeting">Hello, Sign in</span>
                <span id="user-status">Account & Lists</span>
            </div>
            <div class="nav-item" onclick="toggleOrders()">
                <span>Returns</span>
                <span>& Orders</span>
            </div>
            <div class="nav-item" onclick="toggleCart()">
                <span>Your</span>
                <span id="cart-count">Cart (0)</span>
            </div>
        </div>
    </header>

    <div class="hero"></div>

    <div class="main-content">
        <div class="product-grid">
            
            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60" alt="Headset">
                <h3>Premium Wireless Headset</h3>
                <div class="price">$59.99</div>
                <button class="add-btn" onclick="addToCart('Premium Headset', 59.99)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60" alt="Watch">
                <h3>Digital Smart Watch</h3>
                <div class="price">$129.99</div>
                <button class="add-btn" onclick="addToCart('Smart Watch', 129.99)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=500&auto=format&fit=crop&q=60" alt="Camera">
                <h3>Pro DSLR Camera</h3>
                <div class="price">$450.00</div>
                <button class="add-btn" onclick="addToCart('DSLR Camera', 450.00)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500&auto=format&fit=crop&q=60" alt="Shoes">
                <h3>Running Sneakers Red</h3>
                <div class="price">$89.50</div>
                <button class="add-btn" onclick="addToCart('Running Sneakers', 89.50)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=500&auto=format&fit=crop&q=60" alt="Laptop">
                <h3>UltraBook Pro 15"</h3>
                <div class="price">$999.00</div>
                <button class="add-btn" onclick="addToCart('UltraBook Pro', 999.00)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500&auto=format&fit=crop&q=60" alt="Mouse">
                <h3>Wireless Optical Mouse</h3>
                <div class="price">$19.99</div>
                <button class="add-btn" onclick="addToCart('Optical Mouse', 19.99)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1595225476474-87563907a212?w=500&auto=format&fit=crop&q=60" alt="Keyboard">
                <h3>RGB Gaming Keyboard</h3>
                <div class="price">$75.00</div>
                <button class="add-btn" onclick="addToCart('Gaming Keyboard', 75.00)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=500&auto=format&fit=crop&q=60" alt="Sunglasses">
                <h3>Classic Sunglasses</h3>
                <div class="price">$24.50</div>
                <button class="add-btn" onclick="addToCart('Sunglasses', 24.50)">Add to Cart</button>
            </div>

        </div>
    </div>

    <div id="cart-modal" class="modal-overlay">
        <div class="side-panel">
            <div class="panel-header">
                <h2>Your Cart</h2>
                <span class="close-btn" onclick="toggleCart()">&times;</span>
            </div>
            <div id="cart-items-container" class="items-list"></div>
            <div style="border-top: 1px solid #ddd; padding-top: 15px;">
                <h3>Total: <span id="cart-total">$0.00</span></h3>
                <button class="auth-btn" style="margin-top:10px" onclick="checkout()">Buy Now</button>
                <div style="text-align: center; margin-top: 10px;">
                    <a href="#" onclick="clearCart()" style="color: red; font-size: 12px;">Clear Cart</a>
                </div>
            </div>
        </div>
    </div>

    <div id="orders-modal" class="modal-overlay">
        <div class="side-panel">
            <div class="panel-header">
                <h2>Your Orders</h2>
                <span class="close-btn" onclick="toggleOrders()">&times;</span>
            </div>
            <div id="orders-list-container" class="items-list"></div>
        </div>
    </div>

    <div id="auth-modal" class="modal-overlay">
        <div class="auth-box">
            <span class="close-btn" style="position: absolute; top:10px; right:15px;" onclick="closeAuthModal()">&times;</span>
            <div id="signup-section">
                <h2>Create Account</h2>
                <div id="signup-step-1">
                    <input type="text" id="signup-name" placeholder="Full Name">
                    <input type="tel" id="signup-mobile" placeholder="Mobile (Start with 6-9)" maxlength="10">
                    <p id="signup-error" class="error-msg"></p>
                    <button class="auth-btn" onclick="getSignupOtp()">Verify Mobile</button>
                    <p style="margin-top:10px; font-size:12px; color:blue; cursor:pointer;" onclick="showLogin()">Already have an account? Sign in</p>
                </div>
                <div id="signup-step-2" style="display:none;">
                    <input type="text" id="signup-otp" placeholder="Enter OTP">
                    <button class="auth-btn" onclick="verifySignup()">Create Account</button>
                </div>
            </div>
            <div id="login-section" style="display:none;">
                <h2>Sign In</h2>
                <div id="login-step-1">
                    <input type="tel" id="login-mobile" placeholder="Mobile Number" maxlength="10">
                    <p id="login-error" class="error-msg"></p>
                    <button class="auth-btn" onclick="getLoginOtp()">Get OTP</button>
                    <p style="margin-top:10px; font-size:12px; color:blue; cursor:pointer;" onclick="showSignup()">Create account</p>
                </div>
                <div id="login-step-2" style="display:none;">
                    <input type="text" id="login-otp" placeholder="Enter OTP">
                    <button class="auth-btn" onclick="verifyLogin()">Sign In</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. CART ---
        let cart = JSON.parse(localStorage.getItem('shopSphereCart')) || [];
        updateCartCount();

        function addToCart(name, price) { cart.push({ name, price }); saveCart(); updateCartCount(); alert(name + " added!"); }
        function saveCart() { localStorage.setItem('shopSphereCart', JSON.stringify(cart)); }
        function updateCartCount() { document.getElementById('cart-count').innerText = "Cart (" + cart.length + ")"; }
        
        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.style.display = (modal.style.display === "block") ? "none" : "block";
            if(modal.style.display === "block") renderCartItems();
        }

        function renderCartItems() {
            const container = document.getElementById('cart-items-container');
            const totalSpan = document.getElementById('cart-total');
            container.innerHTML = "";
            let total = 0;
            if (cart.length === 0) container.innerHTML = "<p>Cart is empty.</p>";
            cart.forEach((item, index) => {
                total += item.price;
                const div = document.createElement('div');
                div.className = 'item-row';
                div.innerHTML = `<span>${item.name}</span><strong>$${item.price}</strong> <span style='color:red;cursor:pointer' onclick='removeItem(${index})'>x</span>`;
                container.appendChild(div);
            });
            totalSpan.innerText = "$" + total.toFixed(2);
        }

        function removeItem(i) { cart.splice(i, 1); saveCart(); updateCartCount(); renderCartItems(); }
        function clearCart() { cart = []; saveCart(); updateCartCount(); renderCartItems(); }


        // --- 2. CHECKOUT & ORDERS ---
        function checkout() {
            if (cart.length === 0) { alert("Cart is empty!"); return; }
            if (!currentUser) { alert("Please Sign In to Buy"); handleAuthClick(); return; }

            const order = { id: Date.now(), date: new Date().toLocaleString(), items: cart, total: document.getElementById('cart-total').innerText };
            
            let allOrders = JSON.parse(localStorage.getItem('shopSphereOrders')) || [];
            allOrders.push(order);
            localStorage.setItem('shopSphereOrders', JSON.stringify(allOrders));
            
            sessionStorage.setItem('lastOrder', JSON.stringify(order));

            alert("Order Placed! Check 'Returns & Orders'.");
            clearCart();
            toggleCart();
        }

        function toggleOrders() {
            const modal = document.getElementById('orders-modal');
            modal.style.display = (modal.style.display === "block") ? "none" : "block";
            if(modal.style.display === "block") renderOrders();
        }

        function renderOrders() {
            const container = document.getElementById('orders-list-container');
            let allOrders = JSON.parse(localStorage.getItem('shopSphereOrders')) || [];
            container.innerHTML = "";
            if (allOrders.length === 0) { container.innerHTML = "<p>No orders yet.</p>"; return; }

            allOrders.reverse().forEach(order => {
                const div = document.createElement('div');
                div.className = 'order-card';
                div.innerHTML = `<div><strong>Total: ${order.total}</strong></div><div class="order-date">${order.date}</div><div style="font-size:13px; margin-top:5px;">Items: ${order.items.length}</div>`;
                container.appendChild(div);
            });
        }


        // --- 3. AUTH ---
        let registeredUsers = JSON.parse(localStorage.getItem('shopUsers')) || {}; 
        let currentUser = localStorage.getItem('activeUser'); 
        let tempOtp = null; 
        updateHeaderUI();

        function handleAuthClick() { if (currentUser) { if(confirm("Logout?")) logout(); } else { document.getElementById('auth-modal').style.display = 'block'; showSignup(); } }
        function closeAuthModal() { document.getElementById('auth-modal').style.display = 'none'; }
        
        function showLogin() { document.getElementById('signup-section').style.display='none'; document.getElementById('login-section').style.display='block'; }
        function showSignup() { document.getElementById('signup-section').style.display='block'; document.getElementById('login-section').style.display='none'; }

        function isValidMobile(m) { return /^[6-9]\d{9}$/.test(m); }

        function getSignupOtp() {
            const m = document.getElementById('signup-mobile').value;
            const n = document.getElementById('signup-name').value;
            const err = document.getElementById('signup-error');
            err.style.display = 'none';

            if(!n || !isValidMobile(m)) { err.innerText="Invalid Details"; err.style.display='block'; return; }
            if(registeredUsers[m]) { alert("Exists! Sign In."); showLogin(); return; }

            tempOtp = Math.floor(1000 + Math.random()*9000);
            alert("OTP: " + tempOtp);
            document.getElementById('signup-step-1').style.display='none';
            document.getElementById('signup-step-2').style.display='block';
        }

        function verifySignup() {
            if(document.getElementById('signup-otp').value == tempOtp) {
                const m = document.getElementById('signup-mobile').value;
                registeredUsers[m] = document.getElementById('signup-name').value;
                localStorage.setItem('shopUsers', JSON.stringify(registeredUsers));
                loginSuccess(m, registeredUsers[m]);
                alert("Account Created!");
            } else alert("Invalid OTP");
        }

        function getLoginOtp() {
            const m = document.getElementById('login-mobile').value;
            const err = document.getElementById('login-error');
            err.style.display = 'none';

            if(!isValidMobile(m) || !registeredUsers[m]) { err.innerText="Invalid or Not Found"; err.style.display='block'; return; }
            tempOtp = Math.floor(1000 + Math.random()*9000);
            alert("OTP: " + tempOtp);
            document.getElementById('login-step-1').style.display='none';
            document.getElementById('login-step-2').style.display='block';
        }

        function verifyLogin() {
            if(document.getElementById('login-otp').value == tempOtp) {
                const m = document.getElementById('login-mobile').value;
                loginSuccess(m, registeredUsers[m]);
                alert("Welcome Back!");
            } else alert("Invalid OTP");
        }

        function loginSuccess(m, n) { currentUser = n; localStorage.setItem('activeUser', n); updateHeaderUI(); closeAuthModal(); }
        function logout() { localStorage.removeItem('activeUser'); currentUser = null; updateHeaderUI(); }
        function updateHeaderUI() {
            const greet = document.getElementById('user-greeting');
            const stat = document.getElementById('user-status');
            if (currentUser) { greet.innerText = "Hello, " + currentUser; stat.innerText = "Sign Out"; } 
            else { greet.innerText = "Hello, Sign in"; stat.innerText = "Account & Lists"; }
        }
    </script>
</body>
</html>